<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - PawConnect</title>
    <link rel="stylesheet" href="css/global.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .admin-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        .admin-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            border-radius: 15px;
            margin-bottom: 2rem;
            text-align: center;
        }

        .admin-title {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        .admin-subtitle {
            opacity: 0.9;
            font-size: 1.1rem;
        }

        .admin-nav {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .admin-nav-item {
            background: var(--card-bg);
            border: none;
            padding: 1rem 1.5rem;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-primary);
        }

        .admin-nav-item:hover,
        .admin-nav-item.active {
            background: var(--primary-color);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .admin-content {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 2rem;
            box-shadow: var(--shadow);
        }

        .admin-section {
            display: none;
        }

        .admin-section.active {
            display: block;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: var(--card-bg);
            padding: 2rem;
            border-radius: 15px;
            box-shadow: var(--shadow);
            text-align: center;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient);
        }

        .stat-icon {
            width: 60px;
            height: 60px;
            margin: 0 auto 1rem;
            background: var(--gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: var(--text-secondary);
            font-weight: 500;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }

        .data-table th,
        .data-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        .data-table th {
            background: var(--hover-bg);
            font-weight: 600;
            color: var(--text-primary);
        }

        .data-table tr:hover {
            background: var(--hover-bg);
        }

        .action-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            margin: 0 0.25rem;
            transition: all 0.3s ease;
        }

        .action-btn:hover {
            background: var(--primary-dark);
        }

        .action-btn.danger {
            background: #dc3545;
        }

        .action-btn.danger:hover {
            background: #c82333;
        }

        .action-btn.success {
            background: #28a745;
        }

        .action-btn.success:hover {
            background: #218838;
        }

        .status-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .status-active {
            background: #d4edda;
            color: #155724;
        }

        .status-pending {
            background: #fff3cd;
            color: #856404;
        }

        .status-inactive {
            background: #f8d7da;
            color: #721c24;
        }

        .search-filter-bar {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .search-input {
            flex: 1;
            min-width: 200px;
            padding: 0.75rem;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
        }

        .filter-select {
            padding: 0.75rem;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            min-width: 120px;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
        }

        .modal-content {
            background-color: var(--card-bg);
            margin: 5% auto;
            padding: 2rem;
            border-radius: 15px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover {
            color: #000;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--text-primary);
        }

        .form-input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
        }

        .form-textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            min-height: 100px;
            resize: vertical;
        }

        .form-select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
        }

        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .quick-action-card {
            background: var(--card-bg);
            padding: 1.5rem;
            border-radius: 10px;
            box-shadow: var(--shadow);
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .quick-action-card:hover {
            transform: translateY(-3px);
            border-color: var(--primary-color);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .quick-action-icon {
            font-size: 2rem;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }

        .notification-bar {
            background: #d4edda;
            color: #155724;
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            display: none;
        }

        .notification-bar.error {
            background: #f8d7da;
            color: #721c24;
        }

        .notification-bar.warning {
            background: #fff3cd;
            color: #856404;
        }

        @media (max-width: 768px) {
            .admin-container {
                padding: 1rem;
            }

            .admin-nav {
                justify-content: center;
            }

            .admin-nav-item {
                flex: 1;
                justify-content: center;
                min-width: 120px;
            }

            .stats-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            }

            .search-filter-bar {
                flex-direction: column;
            }

            .data-table {
                font-size: 0.9rem;
            }

            .data-table th,
            .data-table td {
                padding: 0.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation will be dynamically updated by session manager -->
    <nav id="main-navigation">
        <!-- Navigation will be dynamically updated by session manager -->
    </nav>

    <div class="admin-container">
        <!-- Admin Header -->
        <div class="admin-header">
            <h1 class="admin-title"><i class="fas fa-shield-alt"></i> Admin Dashboard</h1>
            <p class="admin-subtitle">Manage all aspects of the PawConnect platform</p>
        </div>

        <!-- Notification Bar -->
        <div id="notification-bar" class="notification-bar"></div>

        <!-- Admin Navigation -->
        <div class="admin-nav">
            <button class="admin-nav-item active" data-section="overview">
                <i class="fas fa-home"></i> Overview
            </button>
            <button class="admin-nav-item" data-section="users">
                <i class="fas fa-users"></i> Users
            </button>
            <button class="admin-nav-item" data-section="pets">
                <i class="fas fa-paw"></i> Pets
            </button>
            <button class="admin-nav-item" data-section="adoptions">
                <i class="fas fa-heart"></i> Adoptions
            </button>
            <button class="admin-nav-item" data-section="vets">
                <i class="fas fa-user-md"></i> Veterinarians
            </button>
            <button class="admin-nav-item" data-section="products">
                <i class="fas fa-shopping-cart"></i> Products
            </button>
            <button class="admin-nav-item" data-section="support">
                <i class="fas fa-support"></i> Support
            </button>
            <button class="admin-nav-item" data-section="reports">
                <i class="fas fa-chart-bar"></i> Reports
            </button>
            <button class="admin-nav-item" data-section="settings">
                <i class="fas fa-cog"></i> Settings
            </button>
        </div>

        <!-- Admin Content -->
        <div class="admin-content">
            <!-- Overview Section -->
            <div id="overview-section" class="admin-section active">
                <h2><i class="fas fa-chart-line"></i> Platform Overview</h2>
                
                <!-- Statistics -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="stat-number" id="total-users">0</div>
                        <div class="stat-label">Total Users</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-paw"></i>
                        </div>
                        <div class="stat-number" id="total-pets">0</div>
                        <div class="stat-label">Registered Pets</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-heart"></i>
                        </div>
                        <div class="stat-number" id="total-adoptions">0</div>
                        <div class="stat-label">Adoptions</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                        <div class="stat-number" id="total-orders">0</div>
                        <div class="stat-label">Shop Orders</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-ticket-alt"></i>
                        </div>
                        <div class="stat-number" id="support-tickets">0</div>
                        <div class="stat-label">Support Tickets</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-dollar-sign"></i>
                        </div>
                        <div class="stat-number" id="revenue">$0</div>
                        <div class="stat-label">Monthly Revenue</div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <h3>Quick Actions</h3>
                <div class="quick-actions">
                    <div class="quick-action-card" onclick="openModal('user-modal')">
                        <div class="quick-action-icon">
                            <i class="fas fa-user-plus"></i>
                        </div>
                        <h4>Add User</h4>
                        <p>Create new user account</p>
                    </div>
                    <div class="quick-action-card" onclick="openModal('pet-modal')">
                        <div class="quick-action-icon">
                            <i class="fas fa-plus"></i>
                        </div>
                        <h4>Add Pet</h4>
                        <p>Register new pet</p>
                    </div>
                    <div class="quick-action-card" onclick="openModal('product-modal')">
                        <div class="quick-action-icon">
                            <i class="fas fa-box"></i>
                        </div>
                        <h4>Add Product</h4>
                        <p>Add shop product</p>
                    </div>
                    <div class="quick-action-card" onclick="showSection('reports')">
                        <div class="quick-action-icon">
                            <i class="fas fa-download"></i>
                        </div>
                        <h4>Generate Report</h4>
                        <p>Export platform data</p>
                    </div>
                </div>

                <!-- Recent Activity -->
                <h3>Recent Activity</h3>
                <div id="recent-activity">
                    <div class="activity-item" style="padding: 1rem; background: var(--hover-bg); border-radius: 8px; margin-bottom: 0.5rem;">
                        <i class="fas fa-user-plus" style="color: var(--primary-color); margin-right: 0.5rem;"></i>
                        New user registration: john_doe
                        <span style="float: right; color: var(--text-secondary); font-size: 0.9rem;">2 hours ago</span>
                    </div>
                    <div class="activity-item" style="padding: 1rem; background: var(--hover-bg); border-radius: 8px; margin-bottom: 0.5rem;">
                        <i class="fas fa-heart" style="color: var(--primary-color); margin-right: 0.5rem;"></i>
                        New adoption application submitted
                        <span style="float: right; color: var(--text-secondary); font-size: 0.9rem;">3 hours ago</span>
                    </div>
                    <div class="activity-item" style="padding: 1rem; background: var(--hover-bg); border-radius: 8px; margin-bottom: 0.5rem;">
                        <i class="fas fa-shopping-cart" style="color: var(--primary-color); margin-right: 0.5rem;"></i>
                        New order placed: $45.99
                        <span style="float: right; color: var(--text-secondary); font-size: 0.9rem;">5 hours ago</span>
                    </div>
                </div>
            </div>

            <!-- Users Section -->
            <div id="users-section" class="admin-section">
                <h2><i class="fas fa-users"></i> User Management</h2>
                
                <div class="search-filter-bar">
                    <input type="text" class="search-input" placeholder="Search users..." id="user-search">
                    <select class="filter-select" id="user-role-filter">
                        <option value="">All Roles</option>
                        <option value="user">User</option>
                        <option value="veterinarian">Veterinarian</option>
                        <option value="admin">Admin</option>
                    </select>
                    <select class="filter-select" id="user-status-filter">
                        <option value="">All Status</option>
                        <option value="active">Active</option>
                        <option value="inactive">Inactive</option>
                        <option value="suspended">Suspended</option>
                    </select>
                    <button class="action-btn" onclick="openModal('user-modal')">
                        <i class="fas fa-plus"></i> Add User
                    </button>
                </div>

                <table class="data-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Username</th>
                            <th>Email</th>
                            <th>Role</th>
                            <th>Status</th>
                            <th>Joined</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="users-table-body">
                        <!-- Users will be loaded dynamically -->
                    </tbody>
                </table>
            </div>

            <!-- Pets Section -->
            <div id="pets-section" class="admin-section">
                <h2><i class="fas fa-paw"></i> Pet Management</h2>
                
                <div class="search-filter-bar">
                    <input type="text" class="search-input" placeholder="Search pets..." id="pet-search">
                    <select class="filter-select" id="pet-type-filter">
                        <option value="">All Types</option>
                        <option value="dog">Dog</option>
                        <option value="cat">Cat</option>
                        <option value="bird">Bird</option>
                        <option value="other">Other</option>
                    </select>
                    <select class="filter-select" id="pet-status-filter">
                        <option value="">All Status</option>
                        <option value="available">Available</option>
                        <option value="adopted">Adopted</option>
                        <option value="pending">Pending</option>
                    </select>
                    <button class="action-btn" onclick="openModal('pet-modal')">
                        <i class="fas fa-plus"></i> Add Pet
                    </button>
                </div>

                <table class="data-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                            <th>Type</th>
                            <th>Breed</th>
                            <th>Age</th>
                            <th>Owner</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="pets-table-body">
                        <!-- Pets will be loaded dynamically -->
                    </tbody>
                </table>
            </div>

            <!-- Other sections will be similar... -->
            <!-- For brevity, I'll add the key sections -->

            <!-- Reports Section -->
            <div id="reports-section" class="admin-section">
                <h2><i class="fas fa-chart-bar"></i> Reports & Analytics</h2>
                
                <div class="quick-actions">
                    <div class="quick-action-card" onclick="generateReport('users')">
                        <div class="quick-action-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <h4>User Report</h4>
                        <p>Export user data</p>
                    </div>
                    <div class="quick-action-card" onclick="generateReport('financial')">
                        <div class="quick-action-icon">
                            <i class="fas fa-dollar-sign"></i>
                        </div>
                        <h4>Financial Report</h4>
                        <p>Revenue & transactions</p>
                    </div>
                    <div class="quick-action-card" onclick="generateReport('activity')">
                        <div class="quick-action-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <h4>Activity Report</h4>
                        <p>Platform usage stats</p>
                    </div>
                    <div class="quick-action-card" onclick="generateReport('pets')">
                        <div class="quick-action-icon">
                            <i class="fas fa-paw"></i>
                        </div>
                        <h4>Pet Report</h4>
                        <p>Adoption statistics</p>
                    </div>
                </div>
            </div>

            <!-- Settings Section -->
            <div id="settings-section" class="admin-section">
                <h2><i class="fas fa-cog"></i> System Settings</h2>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem;">
                    <div style="background: var(--hover-bg); padding: 1.5rem; border-radius: 10px;">
                        <h3>Platform Settings</h3>
                        <div class="form-group">
                            <label class="form-label">Site Name</label>
                            <input type="text" class="form-input" value="PawConnect" id="site-name">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Maintenance Mode</label>
                            <select class="form-select" id="maintenance-mode">
                                <option value="0">Disabled</option>
                                <option value="1">Enabled</option>
                            </select>
                        </div>
                        <button class="action-btn">Save Settings</button>
                    </div>
                    
                    <div style="background: var(--hover-bg); padding: 1.5rem; border-radius: 10px;">
                        <h3>Email Settings</h3>
                        <div class="form-group">
                            <label class="form-label">SMTP Server</label>
                            <input type="text" class="form-input" value="smtp.gmail.com" id="smtp-server">
                        </div>
                        <div class="form-group">
                            <label class="form-label">From Email</label>
                            <input type="email" class="form-input" value="admin@pawconnect.com" id="from-email">
                        </div>
                        <button class="action-btn">Save Settings</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add User Modal -->
    <div id="user-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('user-modal')">&times;</span>
            <h2>Add New User</h2>
            <form id="user-form">
                <div class="form-group">
                    <label class="form-label">Username</label>
                    <input type="text" class="form-input" name="username" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-input" name="email" required>
                </div>
                <div class="form-group">
                    <label class="form-label">First Name</label>
                    <input type="text" class="form-input" name="first_name" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Last Name</label>
                    <input type="text" class="form-input" name="last_name" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Role</label>
                    <select class="form-select" name="role" required>
                        <option value="user">User</option>
                        <option value="veterinarian">Veterinarian</option>
                        <option value="admin">Admin</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Password</label>
                    <input type="password" class="form-input" name="password" required>
                </div>
                <div class="form-group">
                    <button type="submit" class="action-btn">Create User</button>
                    <button type="button" class="action-btn" onclick="closeModal('user-modal')" style="background: #6c757d;">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Pet Modal -->
    <div id="pet-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('pet-modal')">&times;</span>
            <h2>Add New Pet</h2>
            <form id="pet-form">
                <div class="form-group">
                    <label class="form-label">Pet Name</label>
                    <input type="text" class="form-input" name="name" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Type</label>
                    <select class="form-select" name="type" required>
                        <option value="dog">Dog</option>
                        <option value="cat">Cat</option>
                        <option value="bird">Bird</option>
                        <option value="rabbit">Rabbit</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Breed</label>
                    <input type="text" class="form-input" name="breed">
                </div>
                <div class="form-group">
                    <label class="form-label">Age</label>
                    <input type="number" class="form-input" name="age" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Gender</label>
                    <select class="form-select" name="gender" required>
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Description</label>
                    <textarea class="form-textarea" name="description"></textarea>
                </div>
                <div class="form-group">
                    <button type="submit" class="action-btn">Add Pet</button>
                    <button type="button" class="action-btn" onclick="closeModal('pet-modal')" style="background: #6c757d;">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Footer -->
    <footer id="main-footer">
        <!-- Footer will be dynamically updated by session manager -->
    </footer>

    <script src="js/session-manager.js"></script>
    <script src="js/admin-panel.js"></script>
    <script>
        // Initialize session manager and check admin access
        const sessionManager = new SessionManager();
        
        // Check session and verify admin access
        sessionManager.checkSession().then(() => {
            if (!sessionManager.isLoggedIn) {
                window.location.href = 'login.html';
                return;
            }
            
            // Check if user is admin
            if (!sessionManager.user || sessionManager.user.role !== 'admin') {
                showNotification('Access denied. Admin privileges required.', 'error');
                setTimeout(() => {
                    window.location.href = 'dashboard.html';
                }, 2000);
                return;
            }
            
            sessionManager.updateUI();
            initializeAdminPanel();
        }).catch(error => {
            console.error('Error checking session:', error);
            window.location.href = 'login.html';
        });

        function initializeAdminPanel() {
            loadStatistics();
            loadUsers();
            loadPets();
            setupEventListeners();
        }

        function setupEventListeners() {
            // Navigation
            document.querySelectorAll('.admin-nav-item').forEach(item => {
                item.addEventListener('click', () => {
                    const section = item.dataset.section;
                    showSection(section);
                });
            });

            // Search and filters
            document.getElementById('user-search')?.addEventListener('input', filterUsers);
            document.getElementById('user-role-filter')?.addEventListener('change', filterUsers);
            document.getElementById('user-status-filter')?.addEventListener('change', filterUsers);
            
            document.getElementById('pet-search')?.addEventListener('input', filterPets);
            document.getElementById('pet-type-filter')?.addEventListener('change', filterPets);
            document.getElementById('pet-status-filter')?.addEventListener('change', filterPets);

            // Forms
            document.getElementById('user-form')?.addEventListener('submit', handleUserSubmit);
            document.getElementById('pet-form')?.addEventListener('submit', handlePetSubmit);
        }

        function showSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('.admin-section').forEach(section => {
                section.classList.remove('active');
            });

            // Remove active class from nav items
            document.querySelectorAll('.admin-nav-item').forEach(item => {
                item.classList.remove('active');
            });

            // Show selected section
            const section = document.getElementById(sectionName + '-section');
            if (section) {
                section.classList.add('active');
            }

            // Add active class to nav item
            const navItem = document.querySelector(`[data-section="${sectionName}"]`);
            if (navItem) {
                navItem.classList.add('active');
            }

            // Load section-specific data
            switch (sectionName) {
                case 'users':
                    loadUsers();
                    break;
                case 'pets':
                    loadPets();
                    break;
                case 'adoptions':
                    loadAdoptions();
                    break;
                case 'vets':
                    loadVets();
                    break;
                case 'products':
                    loadProducts();
                    break;
                case 'support':
                    loadSupportTickets();
                    break;
            }
        }

        async function loadStatistics() {
            try {
                // Simulate API call - replace with actual API
                const stats = {
                    users: 150,
                    pets: 89,
                    adoptions: 23,
                    orders: 45,
                    tickets: 7,
                    revenue: 2850
                };

                document.getElementById('total-users').textContent = stats.users;
                document.getElementById('total-pets').textContent = stats.pets;
                document.getElementById('total-adoptions').textContent = stats.adoptions;
                document.getElementById('total-orders').textContent = stats.orders;
                document.getElementById('support-tickets').textContent = stats.tickets;
                document.getElementById('revenue').textContent = '$' + stats.revenue.toLocaleString();

            } catch (error) {
                console.error('Error loading statistics:', error);
                showNotification('Error loading statistics', 'error');
            }
        }

        async function loadUsers() {
            try {
                // Simulate API call - replace with actual API
                const users = [
                    { id: 1, username: 'john_doe', email: 'john@example.com', role: 'user', status: 'active', created_at: '2025-01-15' },
                    { id: 2, username: 'jane_smith', email: 'jane@example.com', role: 'user', status: 'active', created_at: '2025-01-10' },
                    { id: 3, username: 'vet_sarah', email: 'sarah@vetclinic.com', role: 'veterinarian', status: 'active', created_at: '2025-01-05' },
                    { id: 4, username: 'admin_user', email: 'admin@pawconnect.com', role: 'admin', status: 'active', created_at: '2025-01-01' }
                ];

                renderUsersTable(users);
            } catch (error) {
                console.error('Error loading users:', error);
                showNotification('Error loading users', 'error');
            }
        }

        function renderUsersTable(users) {
            const tbody = document.getElementById('users-table-body');
            if (!tbody) return;

            tbody.innerHTML = users.map(user => `
                <tr>
                    <td>${user.id}</td>
                    <td>${user.username}</td>
                    <td>${user.email}</td>
                    <td><span class="status-badge status-${user.role}">${user.role}</span></td>
                    <td><span class="status-badge status-${user.status}">${user.status}</span></td>
                    <td>${new Date(user.created_at).toLocaleDateString()}</td>
                    <td>
                        <button class="action-btn" onclick="editUser(${user.id})">Edit</button>
                        <button class="action-btn ${user.status === 'active' ? 'danger' : 'success'}" 
                                onclick="toggleUserStatus(${user.id}, '${user.status}')">
                            ${user.status === 'active' ? 'Suspend' : 'Activate'}
                        </button>
                        <button class="action-btn danger" onclick="deleteUser(${user.id})">Delete</button>
                    </td>
                </tr>
            `).join('');
        }

        async function loadPets() {
            try {
                // Simulate API call - replace with actual API
                const pets = [
                    { id: 1, name: 'Buddy', type: 'dog', breed: 'Golden Retriever', age: 3, owner: 'john_doe', status: 'adopted' },
                    { id: 2, name: 'Whiskers', type: 'cat', breed: 'Persian', age: 2, owner: 'jane_smith', status: 'adopted' },
                    { id: 3, name: 'Max', type: 'dog', breed: 'Labrador', age: 1, owner: null, status: 'available' },
                    { id: 4, name: 'Luna', type: 'cat', breed: 'Siamese', age: 4, owner: null, status: 'available' }
                ];

                renderPetsTable(pets);
            } catch (error) {
                console.error('Error loading pets:', error);
                showNotification('Error loading pets', 'error');
            }
        }

        function renderPetsTable(pets) {
            const tbody = document.getElementById('pets-table-body');
            if (!tbody) return;

            tbody.innerHTML = pets.map(pet => `
                <tr>
                    <td>${pet.id}</td>
                    <td>${pet.name}</td>
                    <td>${pet.type}</td>
                    <td>${pet.breed}</td>
                    <td>${pet.age} years</td>
                    <td>${pet.owner || 'None'}</td>
                    <td><span class="status-badge status-${pet.status === 'available' ? 'pending' : 'active'}">${pet.status}</span></td>
                    <td>
                        <button class="action-btn" onclick="editPet(${pet.id})">Edit</button>
                        <button class="action-btn danger" onclick="deletePet(${pet.id})">Delete</button>
                    </td>
                </tr>
            `).join('');
        }

        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'block';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        function showNotification(message, type = 'success') {
            const notificationBar = document.getElementById('notification-bar');
            notificationBar.textContent = message;
            notificationBar.className = `notification-bar ${type}`;
            notificationBar.style.display = 'block';

            setTimeout(() => {
                notificationBar.style.display = 'none';
            }, 5000);
        }

        async function handleUserSubmit(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const userData = Object.fromEntries(formData);

            try {
                // Simulate API call - replace with actual API
                console.log('Creating user:', userData);
                showNotification('User created successfully!');
                closeModal('user-modal');
                loadUsers(); // Reload users table
                e.target.reset();
            } catch (error) {
                console.error('Error creating user:', error);
                showNotification('Error creating user', 'error');
            }
        }

        async function handlePetSubmit(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const petData = Object.fromEntries(formData);

            try {
                // Simulate API call - replace with actual API
                console.log('Creating pet:', petData);
                showNotification('Pet added successfully!');
                closeModal('pet-modal');
                loadPets(); // Reload pets table
                e.target.reset();
            } catch (error) {
                console.error('Error creating pet:', error);
                showNotification('Error adding pet', 'error');
            }
        }

        function filterUsers() {
            // Implementation for filtering users
            console.log('Filtering users...');
        }

        function filterPets() {
            // Implementation for filtering pets
            console.log('Filtering pets...');
        }

        function editUser(userId) {
            console.log('Editing user:', userId);
            showNotification('Edit functionality will be implemented');
        }

        function toggleUserStatus(userId, currentStatus) {
            const newStatus = currentStatus === 'active' ? 'suspended' : 'active';
            console.log(`Changing user ${userId} status to ${newStatus}`);
            showNotification(`User status changed to ${newStatus}`);
            loadUsers(); // Reload table
        }

        function deleteUser(userId) {
            if (confirm('Are you sure you want to delete this user?')) {
                console.log('Deleting user:', userId);
                showNotification('User deleted successfully');
                loadUsers(); // Reload table
            }
        }

        function editPet(petId) {
            console.log('Editing pet:', petId);
            showNotification('Edit functionality will be implemented');
        }

        function deletePet(petId) {
            if (confirm('Are you sure you want to delete this pet?')) {
                console.log('Deleting pet:', petId);
                showNotification('Pet deleted successfully');
                loadPets(); // Reload table
            }
        }

        function generateReport(type) {
            console.log('Generating report:', type);
            showNotification(`${type} report generated successfully`);
        }

        // Close modals when clicking outside
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = 'none';
            }
        }
    </script>
</body>
</html>
